paths:
  /users:
    post:
      operationId: create_user
      summary: Create user
      description: '**Required ACL:** `confd.users.create`'
      tags:
      - users
      parameters:
      - $ref: '#/parameters/tenant_uuid_required'
      - name: body
        in: body
        description: User to create with all the associated resources
        required: true
        schema:
          $ref: '#/definitions/UserRequest'
      responses:
        '201':
          description: User created with all the associated resources
          schema:
            $ref: '#/definitions/UserResponse'

parameters:
  tenant_uuid_required:
    name: Wazo-Tenant
    type: string
    in: header
    description: "The tenant's UUID, defining the ownership of a given resource."
    required: true

definitions:
  UserRequest:
    title: Unified User
    properties:
        user:
          type: object
          description: User Section
          $ref: '#/definitions/User'
        voicemail:
          type: object
          description: Voicemail Section
          $ref: '#/definitions/Voicemail'
        line:
          type: object
          description: Line Section
          $ref: '#/definitions/LineView'

  UserResponse:
    title: Unified User
    properties:
        user:
          type: object
          description: User Section
          $ref: '#/definitions/User'
        voicemail:
          type: object
          description: Voicemail Section
          $ref: '#/definitions/Voicemail'
        line:
          type: object
          description: Line Section
          $ref: '#/definitions/Line'

